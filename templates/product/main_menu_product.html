{% extends 'base.html' %}
{% block title %} Produtos {% endblock %}
{% block stylesheets %}{% endblock stylesheets %}
{% block content %}
<div class="d-flex flex-row vh-100" >
<div class="card">
  <div class="card-header p-2">
    Filtro
  </div>
  <div class="card-body">
<form method="POST" action="{% url 'product:main_menu_product_with_filter' %}" >
  {% csrf_token %}
  {{ form }}
  <div class="d-flex justify-content-center mt-3">
    <button type="submit" class="btn btn-fill btn-primary btn-sm">
    Buscar
    <i class="fa-solid fa-magnifying-glass fa-xl"></i>
  </button>
  </div>
</form>
</div>
</div>

<div class="card col-10" style="width:100%;">
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">
    {{ message }}
  </div>
  {% endfor %}
  <div class="card-header">
    <h4 class="card-title">Produtos</h4>
    <td class="px-1"><a href="{% url 'product:save_product' %}" class="btn btn-primary btn-sm">Registrar Novo Produto
      <i class="fa-regular fa-plus"></i>
    </a></td>
    <td class="px-1"><a href="{% url 'product:main_menu_product' %}" class="btn btn-primary btn-sm">Limpar Filtro</a></td>
  </div>
  <div class="card-body">
    <div class="table-responsive" >
      <table class="table" id="" >
        <thead class="text-primary">
          <tr>
            <th>Nome</th>
            <th style="text-align:center;">Codigo de Barras</th>
            <th style="text-align:center;">Preço</th>
            <th style="text-align:center;">Quantidade em estoque</th>
            <th style="text-align:center;">Situação</th>
            <th colspan="3" style="text-align: center;">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
          <tr>
            <th>{{ product.name }}</th>
            <th style="text-align:center;">{{ product.code_bar }}</th>
            <th style="text-align:center;">{{ product.price }}</th>
            <th style="text-align:center;">{{ product.stock_quantity }}</th>
            <th>
              <form action="{% url 'product:erase_product' product.id %}" method="post">
                {% csrf_token %}
                  <input type="submit" 
                    {% if product.is_deleted %}
                    value="Inativo" class="btn btn-danger" onclick="return confirm('Deseja realmente Ativar?')"
                    {% else %}
                    value="Ativo" class="btn btn-success" onclick="return confirm('Deseja realmente Desativar?')"                                             
                    {% endif %}
                    >
              </form>
            </th>
            <th><a type="submit" class="btn btn-primary" href="{% url 'product:update_product' product.id %}">
              Editar
              <i class="fa-solid fa-pen-to-square"></i>
            </a></th>
            
            {% endfor %}
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</div>
{% endblock content %}
{% block javascripts %}{% endblock javascripts %}