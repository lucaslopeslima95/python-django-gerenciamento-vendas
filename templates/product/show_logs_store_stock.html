{% extends 'base.html' %}
{% block title %} Produtos {% endblock %}
{% block stylesheets %}{% endblock stylesheets %}
{% block content %}
<div class="d-flex flex-row vh-100" >
  <div class="card">
    <div class="card-header p-2">
      Filtro
    </div>
    <div class="card-body">
    <input type="text" id="myInput" placeholder="Nome do produto" class="form-control"/>
    <div class="d-flex justify-content-center mt-3">
      <button type="submit" onclick="enviar()" class="btn btn-fill btn-secondary btn-sm">
      Buscar
      <i class="fa-solid fa-magnifying-glass fa-xl"></i>
    </button>
    </div>
  </div>
  </div>
  
<div class="card col-10" style="width:100%;">
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">
    {{ message }}
  </div>
  {% endfor %}
  <div class="card-header">
    <h4 class="card-title">Historico de Movimentações</h4>
    <td class="px-1"><a href="{% url 'product:show_logs_store_stock' %}" class="btn btn-secondary btn-sm">Limpar Filtro</a></td>
    <td class="px-1"><a href="{% url 'product:show_logs_warehouse' %}" class="btn btn-secondary btn-sm">Vizualizar Historico da Deposito</a></td>
    <td class="px-1"><a href="{% url 'product:show_logs_store_stock' %}" class="btn btn-secondary btn-sm">Vizualizar Historico da Loja</a></td>
    <td class="px-1"><a href="{% url 'product:stock_management' %}" class="btn btn-secondary btn-sm">Voltar Para o Estoque</a></td>
  </div>
  <div class="card-body overflow-x-auto"  style="max-height: 100vh;">
    <div class="table-responsive" >
      <table class="table" id="" >
        <thead class="text-primary">
          <tr>
            <th>Produto</th>
            <th>Usuario</th>
            <th>Quantidade</th>
            <th>Tipo de Movimentação</th>
            <th>Data</th>
          </tr>
        </thead>
        <tbody>
          {% for log in logsStoreStock %}
          <tr>
            <th>{{ log.product }}</th>
            <th>{{ log.user }}</th>
            <th>{{ log.quantity }}</th>
            <th>{{ log.get_type_movement_display }}</th>
            <th>{{ log.date }}</th>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
</div>
<script>
  function enviar() {
    var valorCampo = document.getElementById("myInput").value;
    window.location.href = "http://127.0.0.1:8000/product/stock_management_filter?parametro=" + valorCampo;
  }
</script>
{% endblock content %}
{% block javascripts %}{% endblock javascripts %}